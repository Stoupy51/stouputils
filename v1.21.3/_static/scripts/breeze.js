(function(){"use strict";const h=[];function f(e,t){const n={selector:e,init:t,instances:new WeakMap};h.push(n),document.querySelectorAll(e).forEach(o=>E(o,n))}function E(e,t){if(t.instances.has(e))return;const n=t.init(e)||void 0;t.instances.set(e,n)}function y(e,t){if(!t.instances.has(e))return;const n=t.instances.get(e);n&&n(),t.instances.delete(e)}new MutationObserver(e=>{for(const t of e){for(const n of t.addedNodes)if(n instanceof HTMLElement){for(const o of h)n.matches(o.selector)&&E(n,o);for(const o of n.querySelectorAll(h.map(r=>r.selector).join(","))){const r=h.filter(s=>o.matches(s.selector));for(const s of r)E(o,s)}}for(const n of t.removedNodes)if(n instanceof HTMLElement){for(const o of h)n.matches(o.selector)&&y(n,o);for(const o of n.querySelectorAll(h.map(r=>r.selector).join(","))){const r=h.filter(s=>o.matches(s.selector));for(const s of r)y(o,s)}}}}).observe(document.documentElement,{childList:!0,subtree:!0}),document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==="k"){const t=document.querySelector(".bz-search-button a");t&&(e.preventDefault(),t.click())}});var p=(e=>(e.AUTO="auto",e.LIGHT="light",e.DARK="dark",e))(p||{});const g=e=>{const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=e==="auto"?t:e;document.documentElement.dataset.mode=e,document.documentElement.dataset.theme=n,localStorage.setItem("breeze-mode",e)},A=()=>{if((localStorage.getItem("breeze-mode")??"auto")==="auto"){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";g(t==="light"?"dark":"light")}else g("auto")};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(localStorage.getItem("breeze-mode")==="auto"){const n=e.matches?"dark":"light";document.documentElement.dataset.theme=n}});let k=window.scrollY;f(".bz-back-to-top",e=>{const t=()=>{const o=window.scrollY,r=o<k&&o>0;e.classList.toggle("active",r),k=o},n=(()=>{let o=!1;return()=>{o||(requestAnimationFrame(()=>{t(),o=!1}),o=!0)}})();return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)}),f(".bz-dropdown",e=>{const t=e.querySelector("button"),n=e.querySelector("[role=menu]");if(!t||!n)return;t.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true");const o=()=>{t.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false")},r=()=>{t.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true")},s=()=>o(),a=()=>r(),c=d=>{const l=Array.from(n.querySelectorAll("[role=menuitem]"));if(!l.length)return;const m=document.activeElement;if(d.key==="Enter")o(),d.preventDefault();else if(d.key==="Escape")r(),t.focus();else if(d.key==="ArrowDown"){const u=m instanceof HTMLElement?l.indexOf(m):-1;l[(u+1)%l.length].focus(),d.preventDefault()}else if(d.key==="ArrowUp"){const u=m instanceof HTMLElement?Math.max(l.indexOf(m),0):0;l[(u-1+l.length)%l.length].focus(),d.preventDefault()}},i=d=>{const l=d.relatedTarget;(!l||!e.contains(l))&&r()};return e.addEventListener("mouseenter",s),e.addEventListener("mouseleave",a),e.addEventListener("keydown",c),e.addEventListener("focusout",i),()=>{e.removeEventListener("mouseenter",s),e.removeEventListener("mouseleave",a),e.removeEventListener("keydown",c),e.removeEventListener("focusout",i)}}),f("label[role=button][for]",e=>{const t=e.getAttribute("for");if(!t)return;const n=document.getElementById(t);if(!n)return;e.hasAttribute("tabindex")||e.setAttribute("tabindex","0");const o=r=>{(r.key==="Enter"||r.key===" ")&&(n.click?.(),r.preventDefault())};return e.addEventListener("keydown",o),()=>e.removeEventListener("keydown",o)});const q=36e5;f(".bz-repo-stats",e=>{const t=e.querySelector("a");t&&x(t)});function v(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e4?Math.round(e/1e3)+"k":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString()}async function T(e,t){const n=await fetch(`https://api.github.com/repos/${e}/${t}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);const o=await n.json();return{stars:o.stargazers_count,forks:o.forks_count}}async function I(e,t){const n=encodeURIComponent(`${e}/${t}`),o=await fetch(`https://gitlab.com/api/v4/projects/${n}`);if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.json();return{stars:r.star_count,forks:r.forks_count}}function C(e){const t=localStorage.getItem(e);if(!t)return null;const{data:n,timestamp:o}=JSON.parse(t);return Date.now()-o>q?(localStorage.removeItem(e),null):n}function M(e,t){localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now()}))}async function x(e){const t=e.dataset.provider,n=e.dataset.user,o=e.dataset.repo;if(!t||!n||!o){console.warn("Missing provider, user, or repo data for repo stats");return}if(t!=="github"&&t!=="gitlab"){console.warn(`Unsupported provider: ${t}`);return}const r=`bz-repo-stats:${t}:${n}/${o}`,s=e.querySelector('[data-stat="stars"]'),a=e.querySelector('[data-stat="forks"]');if(!s||!a)return;const c=C(r);if(c){s.textContent=v(c.stars),a.textContent=v(c.forks);return}try{const i=t==="github"?await T(n,o):await I(n,o);s.textContent=v(i.stars),a.textContent=v(i.forks),M(r,i)}catch(i){console.error("Failed to load repo stats:",i)}}f(".bz-header-tabs",e=>{const t=e.querySelector("ul"),n=t?.querySelectorAll("li"),o=e.querySelector(".bz-dropdown"),r=o?.querySelector("ul");if(!t||!n||!o||!r)return;t.style.overflowX="hidden",n.forEach((a,c)=>{a.dataset.tabId||(a.dataset.tabId=String(c))});const s=new IntersectionObserver(a=>{a.forEach(c=>{const i=c.target,d=i.dataset.tabId;if(c.isIntersecting){const l=r.querySelector(`[data-tab-id="${d}"]`);l&&l.remove(),i.style.visibility=""}else{if(r.querySelector(`[data-tab-id="${d}"]`))return;const l=i.cloneNode(!0),m=Array.from(r.children).find(w=>Number(w.dataset.tabId)>Number(d));m?r.insertBefore(l,m):r.appendChild(l),l.dataset.tabId=d;const u=l.querySelector("a");u&&(u.role="menuitem"),i.style.visibility="hidden"}})},{root:t,threshold:1});return n.forEach(a=>s.observe(a)),()=>s.disconnect()}),f(".bz-search-button",e=>{const t=e.querySelector("a");if(!t)return;const n=o=>{if(document.getElementsByTagName("readthedocs-search").length>0){o.preventDefault(),o.stopPropagation();const r=new CustomEvent("readthedocs-search-show");document.dispatchEvent(r)}};return t.addEventListener("click",n),()=>t.removeEventListener("click",n)}),f("[data-drawer]",e=>{const t=document.getElementById(e.dataset?.drawer??"");if(!(t instanceof HTMLInputElement))return;const n=document.querySelector(`label[role="button"][for="${t.id}"]`),o=new Map;e.querySelectorAll("a[href]").forEach(a=>{const c=i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),t.checked=!1,a.click())};o.set(a,c),a.addEventListener("keydown",c)});const r=()=>{if(t.checked){const a=L(e);if(a.length===0)return;setTimeout(()=>a[0].focus(),10)}},s=a=>{if(t.checked){if(a.key==="Escape")t.checked=!1,n?.focus();else if(a.key==="Tab"){const c=L(e),i=c[0],d=c[c.length-1];a.shiftKey?document.activeElement===i&&(a.preventDefault(),d.focus()):document.activeElement===d&&(a.preventDefault(),i.focus())}}};return t.addEventListener("change",r),e.addEventListener("keydown",s),()=>{o.forEach((a,c)=>{c.removeEventListener("keydown",a)}),t.removeEventListener("change",r),e.removeEventListener("keydown",s)}});const L=e=>Array.from(e.querySelectorAll(["a[href]","summary","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","))).filter(t=>{if(t.offsetParent===null)return!1;const n=t.closest("details");return!(n&&!n.open&&!t.matches("summary"))});f(".bz-sidebar-toc",e=>{const t=e.querySelectorAll("a[href^='#']:not([href='#'])"),n=Array.from(t).map(s=>document.getElementById(s.hash.slice(1))).filter(s=>s!==null).reverse(),o=()=>{const s=n.find(a=>a.getBoundingClientRect().top<150)??n.at(-1);t.forEach(a=>a.classList.toggle("current",a.hash===`#${s?.id}`))},r=(()=>{let s=!1;return()=>{s||(requestAnimationFrame(()=>{o(),s=!1}),s=!0)}})();return o(),window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)}),f(".bz-search-form",e=>{if(!(e instanceof HTMLFormElement))return;const t=n=>{n.preventDefault();const o=document.getElementById("search-results"),s=new FormData(e).get("q")?.toString()??"";o&&(o.innerHTML=""),Search?.performSearch(s)};return e.addEventListener("submit",t),()=>e.removeEventListener("submit",t)}),f(".bz-theme-switcher",e=>{const t=e.querySelector("button");if(!t)return;const n=()=>{const r=document.documentElement.dataset.theme===p.LIGHT?p.DARK:p.LIGHT;t.ariaLabel=`Switch to ${r} mode`,t.dataset.tooltip=t.ariaLabel},o=()=>{A(),n()};return n(),t.addEventListener("click",o),()=>t.removeEventListener("click",o)});const S=new URL(document.documentElement.dataset.content_root||"./",window.location.href).pathname,D=window.location.pathname.startsWith(S)?window.location.pathname.slice(S.length):"",b=new Map;f(".bz-version-switcher",e=>{const t=e.querySelector("button"),n=t?.querySelector("span"),o=e.querySelector("ul"),r=t?.dataset.current,s=t?.dataset.url;if(!t||!n||!o||!r||!s)return;const a=new Map;return b.has(s)||b.set(s,fetch(s).then(c=>{if(!c.ok)throw new Error(`Failed to fetch versions from ${s}`);return c.json()}).catch(c=>{throw b.delete(s),c})),b.get(s).then(c=>{Array.isArray(c)&&(o.innerHTML="",c.forEach(i=>{const d=document.createElement("li");if(o.appendChild(d),i.version===r)d.innerHTML=`<span class="current">${i.name}</span>`,n.textContent=i.name;else{const l=new URL(i.url,window.location.href),m=new URL(D,l).href,u=document.createElement("a");d.appendChild(u),u.href=m,u.role="menuitem",u.textContent=i.name;const w=$=>{$.preventDefault(),fetch(m,{method:"HEAD"}).then(H=>window.location.href=H.ok?m:i.url).catch(()=>window.location.href=i.url)};a.set(u,w),u.addEventListener("click",w)}}))}).catch(c=>console.error("Version switcher error:",c)),()=>{a.forEach((c,i)=>{i.removeEventListener("click",c)})}})})();
